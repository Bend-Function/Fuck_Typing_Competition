var wubi86=[],wubi861=[],pinyin=[],dazi_pk=[];(function(){function na(a){return!1}function oa(){return!0}function x(a,b){var c=b?b:0;if(a>=n.length)ba(2);else{for(var d=0;d<n.length;d+=2){var e=n.item(d).getElementsByTagName("input").item(1);a==d&&"stop"!=c?(e.readOnly=!1,e.onfocus="",ca(e),e.onkeydown=function(a){U(this,a,1)},e.onkeyup=function(a){U(this,a,2)},e.oninput=function(a){U(this,a,3)},e.onclick="",e.parentNode.className="typing typing_on"):"stop"!=c?(e.onfocus=function(){var b=n.item(a).getElementsByTagName("input").item(1);ca(b)},e.parentNode.className="typing"):(e.readOnly=!0,e.parentNode.className="typing",a==d&&(e.onclick=function(){confirm("\u6b63\u5904\u4e8e\u6682\u505c\u72b6\u6001\uff0c\u6062\u590d\u6253\u5b57\uff1f")&&dazi_pause(G("pause_a"))}))}r=0}}function U(a,b,c){b=b||window.event;b=b.which?b.which:b.keyCode;if(0<z)return!1;var d=a.parentNode.getElementsByTagName("div").item(0).getElementsByTagName("span").item(0),e=a.parentNode.getElementsByTagName("input").item(0),f=a.value.length,g=e.value.length,l=O[k],m=pa(e.value,a.value);d.innerHTML=m;65<=b&&90>=b&&0==q&&V();if(0==da)8==b&&2<=k&&1!=r&&0==f&&1==c&&(r=1,k-=2,x(k),a.onkeydown="",a.onkeyup="",a.oninput="",400>u(a)-D()&&(v=u(a)-400,G("content").scrollTop=v)),P(b,c);else{0<f&&0==q&&V();if(1!=r&&k<n.length){1==E[k]-f&&0==O[k]&&0==l&&W++;if(f<g||" "!=e.value.substring(g-1,g))E[k]=0<f?f>g?g:f:0;d=X(E)-X(O);d-h>Y&&(Y=d-h);h=d;F=X(ea);P(b,c)}g==f&&e.value.substring(g-1,g)==a.value.substring(f-1,f)&&E.length!=k/2&&1!=r?(r=1,k+=2,setTimeout(function(){k<n.length&&(n.item(k).getElementsByTagName("input").item(1).value="");x(k)},10),a.onkeydown="",a.onkeyup="",a.oninput="",300<u(a)-D()&&(v=u(a)-300,G("content").scrollTop=v),P(b,c)):g<f&&e.value.substring(g-1,g)==a.value.substring(g-1,g)&&E.length!=k/2&&1!=r?(r=1,e=a.value,n.item(k).getElementsByTagName("input").item(1).value=e.substr(0,g),k+=2,n.item(k).getElementsByTagName("input").item(1).value=e.substr(g,f-g),x(k),a.onkeydown="",a.onkeyup="",a.oninput="",300<u(a)-D()&&(v=u(a)-300,G("content").scrollTop=v),P(b,c)):g<=f&&13==b&&1!=r&&1==c&&(r=1,k+=2,x(k),a.onkeydown="",a.onkeyup="",a.oninput="",300<u(a)-D()&&(v=u(a)-300,G("content").scrollTop=v))}da=f}function P(a,b){var c="cn"==G("type").value?2:1;if(32==a||48<=a&&57>=a||65<=a&&90>=a||96<=a&&111>=a||186<=a&&221>=a||8==a){if(h<Z&&2==c||h<=Z&&1==c){var c=[],d;for(d in w[b-1])d<h&&(c[d]=w[b-1][d]);w[b-1]=c}8!=a&&("undefined"!=typeof w[b-1][h]?w[b-1][h]++:w[b-1][h]=1,Z=h);G(kn1).value=JSON.stringify(w[qa(w)])}}function qa(a){for(var b=[0,0,0],c=0;3>c;c++)for(var d=a[c].length-1;0<=d;d--)0<a[c][d]&&(b[c]+=parseInt(a[c][d]));return b[0]>=b[1]&&b[0]>=b[2]?0:b[1]>=b[0]&&b[1]>=b[2]?1:2}function V(){0==H&&(H=A());clearTimeout(aa);aa=setTimeout(V,100);var a=G("typing_info_li");G("name");var b=G("time"),c=0<z?A()-z:0;q=A()-H-c-fa;Q=0<q?Math.round((h-F)/q*6E4*Math.pow(10,0))/Math.pow(10,0):0;R=0<h?Math.round((h-F)/h*100*Math.pow(10,0))/Math.pow(10,0):0;q>5E3*t.length&&(1<=t.length?t[t.length]=h-ga:t[0]=h,ga=h);if("undefined"!=typeof dazi_pk[0]){for(var c=.001*q/5,d=0,e=0;e<c+1;e++)"undefined"!=typeof dazi_pk[e]&&(d=e==parseInt(c+1)?d+dazi_pk[e]*(c-parseInt(c)):d+parseInt(dazi_pk[e]));I=d.toFixed(2);if(0<I)for(var f=e=0;f<n.length;f+=2){var g=n.item(f).getElementsByTagName("input").item(0),c=n.item(f).getElementsByTagName("span").item(0),d=n.item(f).getElementsByTagName("span").item(1),g=g.value.length;if(e+g>I){e=I-e;e=e.toFixed(2);d=d.offsetWidth;c.style.display="block";c.style.left=parseInt(e/g*d)+"px";c.className=I>h?"dazi_pk":"dazi_pk2";break}else e+=parseInt(g),c.style.display="none"}}6E4*b.value>q?(d=new Date(6E4*b.value-q),c=10>d.getMinutes()?"0"+d.getMinutes():d.getMinutes(),d=10>d.getSeconds()?"0"+d.getSeconds():d.getSeconds(),c=c+":"+d):c="00:00";d=parseInt(h/ha*100);a.innerHTML='\x3cul\x3e\x3cli class\x3d"daojishi"\x3e\x3cdiv\x3e\x3c/div\x3e\u5012\u8ba1\u65f6\x3c/li\x3e\x3cli class\x3d"daojishi_time"\x3e'+c+'\x3c/li\x3e\x3cli class\x3d"sheding"\x3e\u8bbe\u5b9a\u65f6\u95f4\uff1a'+b.value+'\u5206\u949f\x3c/li\x3e\x3cli class\x3d"sudu"\x3e\u901f\u3000\u5ea6\uff1a'+Q+" "+("cn"==G("type").value?"WPM":"KPM")+'\x3c/li\x3e\x3cli class\x3d"zhengquelv"\x3e\u6b63\u786e\u7387\uff1a'+R+' %\x3c/li\x3e\x3cli class\x3d"cuowu"\x3e\u9519\u3000\u8bef\uff1a'+F+' \u5b57\x3c/li\x3e\x3cli class\x3d"tuige"\x3e\u9000\u3000\u683c\uff1a'+W+' \u6b21\x3c/li\x3e\x3cli class\x3d"zongzishu"\x3e\u603b\u5b57\u6570\uff1a'+h+' \u5b57\x3c/li\x3e\x3cli class\x3d"jindu"\x3e\x3cdiv style\x3d"width:'+d+'%"\x3e\x3c/div\x3e\x3c/li\x3e'+("cn"==G("type").value?'\x3cli class\x3d"pinyin"\x3e\u62fc\u97f3\uff1a'+J+(""!=B?"("+B+")":"")+'\x3c/li\x3e\x3cli class\x3d"wubi86"\x3e\u4e94\u7b14\uff1a'+K+(""!=C?"("+C+")":"")+'\x3c/li\x3e\x3cli class\x3d"wubi86"\x3e\u8bcd\u7ec4\uff1a'+S+(""!=L?"("+L+")":"")+"\x3c/li\x3e":"")+"\x3c/ul\x3e";ia("typing_info","r");q>=6E4*b.value&&(clearTimeout(aa),ba(1))}function ba(a){for(var b=qx1,c=0,d=0;d<t.length;d++)c+=t[d];0!=h-c&&(t[t.length]=h-c);document.getElementById(b).value=t.join(",");var e=tp1.split(",");if(7==e.length){var b=e[0],c=e[1],d=e[2],f=e[3],g=e[4],k=e[5],e=e[6];0==ja&&(ja=1,dazi_pause(G("pause_a")),G("info_form").action+="?"+b+"\x3d"+Y+"\x26"+c+"\x3d"+q+"\x26"+d+"\x3d"+Q+"\x26"+f+"\x3d"+R+"\x26"+g+"\x3d"+W+"\x26"+k+"\x3d"+h+"\x26"+e+"\x3d"+F,b=document.body.clientHeight||document.body.offsetHeight,G("window_box").style.display="block",G("window_box").style.height=G("container").offsetHeight+10+"px",a='\x3cdiv class\x3d"info_div" style\x3d"margin-top:'+(b/2-100+"px")+'"\x3e\x3cdiv class\x3d"typing_end_div2"\x3e'+(1==a?"\u8bbe\u5b9a\u65f6\u95f4\u5df2\u5230\uff01":"\u606d\u559c\u5b8c\u6210\u6253\u5b57\uff01")+"\x3c/div\x3e\x3ch4\x3e\u6d4b\u8bd5\u7ed3\u679c\uff08"+("cn"==G("type").value?"\u4e2d\u6587":"\u82f1\u6587")+'\u6253\u5b57\uff09\x3c/h4\x3e\x3cdiv class\x3d"typing_end_div"\x3e\u65f6\u95f4\uff1a\x3cstrong\x3e'+G("time").value+"\x3c/strong\x3e\u5206\u949f\uff0c\u901f\u5ea6\uff1a\x3cstrong\x3e"+Q+"\x3c/strong\x3e"+("cn"==G("type").value?"WPM":"KPM")+"\uff0c\u6b63\u786e\u7387\uff1a\x3cstrong\x3e"+R+'\x3c/strong\x3e%\x3c/div\x3e\x3cdiv class\x3d"button_div"\x3e\x3ca id\x3d"box_button_a" onclick\x3d"G(\'info_form\').submit();" href\x3d"javascript:;" class\x3d"double"\x3e\u7acb\u5373\u67e5\u770b\x3c/a\x3e\x3cspan id\x3d"box_button_span_ts"\x3e\x3c/span\x3e\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',G("window_box").innerHTML=a,ka(10))}}function ka(a){o=G("box_button_span_ts");clearTimeout(__daojishi2);0>=a?(o.innerHTML="",G("info_form").submit()):(o.innerHTML="\x3cstrong\x3e"+a+"\x3c/strong\x3e\u79d2\u540e\u81ea\u52a8\u8df3\u8f6c",__daojishi2=setTimeout(function(){ka(a-1)},1E3))}function ca(a){if("undefined"!=typeof a.createTextRange){var b=a.createTextRange();b.moveStart("character",a.value.length);b.collapse(!0);b.select()}else a.setSelectionRange(a.value.length,a.value.length),a.focus()}function pa(a,b){str1=la(a);str2=la(b);var c="",d=0,e=null,f=0,g=G("type").value,h=str1.length,m=str2.length;for(l=0;l<(h>m?h:m);l++)if(l<h){var p=l<m?b.substr(l):null,q=/^[a-z\' ]{1,20}$/;str1[l]==str2[l]?c+='\x3cspan class\x3d"green"\x3e'+str1[l]+"\x3c/span\x3e":null==str2[l]?(c+=str1[l],0==f&&0<m&&(f=l)):"cn"==g&&q.test(p)?(c+='\x3cspan class\x3d"yellow"\x3e'+str1[l]+"\x3c/span\x3e",0==f&&0<m&&(f=l),null==e&&(e=m<h?m-l:h-l)):(d++,c+='\x3cspan class\x3d"red"\x3e'+str1[l]+"\x3c/span\x3e")}if(0==m||0!=f){g=n.item(k).id;g=g.substr(2);if("array"==typeof wubi86[g]||"object"==typeof wubi86[g]){if(m=wubi86[g],"array"==typeof m[f]||"object"==typeof m[f]){p="";for(q=f;q<f+m[f][0]&&q<h;q++)p+=str1[q];L=p;S=m[f][1]}}else L="",S="-";"array"==typeof wubi861[g]||"object"==typeof wubi861[g]?(m=wubi861[g],"undefined"!=typeof m[f]?(C=str1[f],K=m[f]):(C="",K="-")):(C="",K="-");"array"==typeof pinyin[g]||"object"==typeof pinyin[g]?(m=pinyin[g],"undefined"!=typeof m[f]?(B=str1[f],J=m[f]):(B="",J="-")):(B="",J="-")}else L="",S="-",B="",J="-",C="",K="-";ea[k]=d;O[k]=null==e?0:e;return c}function X(a){for(var b=0,c=0;c<2*a.length&&c<=k;c+=2)0<a[c]&&(b+=a[c]);return b}function la(a){for(var b=[],c=0;c<a.length;c++)b[c]=a.substr(c,1),"\x3c"==b[c]&&(b[c]="\x26lt;"),"\x3e"==b[c]&&(b[c]="\x26gt;");return b}function A(){return(new Date).getTime()}function ia(a,b){var c=G(a);if(c){u(c);D();var d;d=window.innerHeight&&window.scrollMaxY?document.body.scrollWidth:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollWidth:document.body.offsetWidth;var e=n.item(0).offsetWidth;c.style.marginRight="0px";c.style.right=240<(d-e)/2?"r"==b?Math.round((d-e)/2-240)+"px":Math.round(d-(d-e)/2+10)+"px":"r"==b?"10px":d-154+"px"}}function D(){return G("content").scrollTop}function u(a){var b=a.offsetTop;for(a=a.offsetParent;null!==a;)b+=a.offsetTop,a=a.offsetParent;return b}function ra(){for(var a=0,b=0,c=0,d=1;d<n.length;d+=2){var e=n.item(d).getElementsByTagName("span");if(1==e.length){var f=e.item(0).offsetWidth,e=e.item(0).innerHTML.replace(/(\s{1})$/g,"");0<e.length&&(c+=e.length);f>a&&(a=f,b=d)}}ha=c;return[b,a]}function ma(a){a=a||window.event;var b=a.target||a.srcElement,c=b.type||b.getAttribute("type"),d=b.getAttribute("readonly"),b=b.getAttribute("enabled");if(8==a.keyCode&&"password"!=c&&"text"!=c&&"textarea"!=c||!(8!=a.keyCode||"password"!=c&&"text"!=c&&"textarea"!=c||1!=(null==d?!1:d)&&1==(null==b?!0:b)))return!1}var n=G("content").getElementsByTagName("div"),k=0,H=0,z=0,fa=0,E=[],ea=[],O=[],v=0,r=0,t=[],ga=0,S="",L="",K="",C="",J="",B="",I=0,da=0,Q=0,R=0,q=0,W=0,Y=0,h=0,F=0,M=null,ja=0,ha=0,w=[[],[],[]],Z=0;window.onscroll=function(){G("content").scrollTop=v};document.body.onpaste=function(){return!1};document.body.oncopy=function(){return!1};document.body.oncut=function(){return!1};document.onselectstart=new Function("return false");window.sidebar&&(document.onmousedown=na,document.onclick=oa);var aa=null;dazi_pause=function(a){"pause"==a.className?(a.innerHTML="\u7ee7\u7eed",a.className="pause2",0<H&&(z=A()),x(k,"stop")):(a.innerHTML="\u6682\u505c",a.className="pause",0<H&&(fa+=A()-z,z=0),x(k))};close_light=function(a){"light"==a.className?(a.innerHTML="\u5f00\u706f",a.className="light2",document.body.className="dazi_style_black"):(a.innerHTML="\u5173\u706f",a.className="light",document.body.className="")};__daojishi2=null;var p={o:null,init:function(a){a.onmousedown=this.start},start:function(a){a=p.fixEvent(a);a.preventDefault&&a.preventDefault();p.o=this;this.x=a.clientX-p.o.offsetLeft;this.y=a.clientY-p.o.offsetTop;document.onmousemove=p.move;document.onmouseup=p.end},move:function(a){a=p.fixEvent(a);var b;b=a.clientX-p.o.x;a=a.clientY-p.o.y;p.o.style.left=b+"px";p.o.style.top=a+"px"},end:function(a){p.fixEvent(a);p.o=document.onmousemove=document.onmouseup=null},fixEvent:function(a){a||(a=window.event,a.target=a.srcElement,a.layerX=a.offsetX,a.layerY=a.offsetY);return a}};typing_continue=function(){clearTimeout(M);M=setTimeout("typing_continue()",31E5);var a=A(),b=new AjaxClass;b.Method="GET";b.Url="jingsai_do.php?do\x3dtyping_continue\x26start_page\x3d"+G("start_page").value+"\x26ssid\x3d"+G("ssid").value+"\x26t\x3d"+a;b.Async=!0;b.Loading=function(){};b.CallBack=function(a){clearTimeout(M);M=setTimeout("typing_continue()",3E6)};b.Send()};var M=setTimeout("typing_continue()",3E6),y=document.body.clientHeight||document.body.offsetHeight;0<y&&(G("content").style.height=y-180+"px");if(1<n.length){var y=document.documentElement.clientWidth,T=G("content").offsetWidth;y>T&&(y-=(y-T)/2);for(var N=ra(),l=1;10>=l;l++){var sa=n.item(N[0]).getElementsByTagName("span").item(0);N[1]=sa.offsetWidth;if(0<T&&0<N[1]&&(N[1]>T-60||N[1]>y-240))G("content").className="typing_content font"+l;else break}}x(k);G("loading").style.display="none";G("typing_info").style.display="block";p.init(document.getElementById("typing_info"));ia("typing_info","r");document.onkeypress=ma;document.onkeydown=ma})();